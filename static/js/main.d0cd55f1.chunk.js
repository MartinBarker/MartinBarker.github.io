(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{13:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(7),o=a.n(r),i=(a(13),a(1));a(26);var c=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)("Click Load to load ffmpeg"),[o,c]=Object(n.useState)([]),[s,m]=Object(n.useState)([]),[u,d]=Object(n.useState)(!1),p=l.a.useMemo(()=>Object(i.createFFmpeg)({log:!0}),[]),f=l.a.useCallback(async()=>{if(!u)try{r("Loading ffmpeg-core.js"),await p.load(),d(!0),r("ffmpeg loaded. Now you can render the video.")}catch(e){r("Failed to load ffmpeg"),console.error(e)}},[p,u]),g=l.a.useCallback(async()=>{if(u)if(0!==o.length&&0!==s.length)try{r("Start rendering video");const e=o[0],a=s[0];p.FS("writeFile","audio.mp3",await Object(i.fetchFile)(URL.createObjectURL(e))),p.FS("writeFile","image.jpg",await Object(i.fetchFile)(URL.createObjectURL(a)));const n=["-loop","1","-framerate","2","-i","image.jpg","-i","audio.mp3","-c:v","libx264","-preset","slow","-tune","stillimage","-crf","18","-c:a","aac","-b:a","192k","-shortest","output.mp4"];console.log("Running ffmpeg command:",n.join(" ")),await p.run(...n),r("Complete rendering video");const l=p.FS("readFile","output.mp4");t(URL.createObjectURL(new Blob([l.buffer],{type:"video/mp4"})))}catch(e){r("Error rendering video"),console.error(e)}else r("Please select at least one audio and one image file.");else r("Please load ffmpeg first.")},[p,u,o,s]);return l.a.createElement("div",{className:"App"},l.a.createElement("header",null,l.a.createElement("h1",null,"Welcome to My Video Rendering Site"),l.a.createElement("p",null,"This site allows you to render videos using audio and image files."),l.a.createElement("p",null,"Created by Martin Barker. This site is a work in progress.")),l.a.createElement("input",{type:"file",multiple:!0,onChange:e=>{const t=Array.from(e.target.files),a=t.filter(e=>e.type.startsWith("audio/")),n=t.filter(e=>e.type.startsWith("image/"));c(a),m(n)}}),l.a.createElement("div",null,l.a.createElement("h3",null,"Audio Files"),l.a.createElement("table",null,l.a.createElement("tbody",null,o.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name)))))),l.a.createElement("div",null,l.a.createElement("h3",null,"Image Files"),l.a.createElement("table",null,l.a.createElement("tbody",null,s.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name)))))),l.a.createElement("video",{src:e,controls:!0}),l.a.createElement("br",null),l.a.createElement("button",{onClick:f,disabled:u},"Load ffmpeg"),l.a.createElement("button",{onClick:g},"Render Video"),l.a.createElement("p",null,a))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(c,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},8:function(e,t,a){e.exports=a(27)}},[[8,1,2]]]);
//# sourceMappingURL=main.d0cd55f1.chunk.js.map